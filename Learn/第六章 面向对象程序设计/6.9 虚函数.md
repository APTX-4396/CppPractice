**虚函数是引入派生概念之后用来表现基类和派生类成员函数之间的一种关系的**  
**虚函数在基类中定义，是非静态的成员函数**  
**指向基类对象的指针指向派生类对象后，可以访问派生类对象中由基类继承下来的成员，但不能访问那些派生类对象自己新增加的成员**  
# 6.9.1 虚函数的定义
**虚函数是在基类中用virtual声明的成员函数**  
当基类中的某个成员函数被声明为虚函数后，此虚函数就可以在一个或多个派生类中被重新定义，在派生类中重新定义时，其函数原型、返回类型、函数名、参数个数、参数类型、参数的顺序都必须于基类中的原型完全相同  
定义虚函数的语法格式为：  
virtual 函数返回值类型 函数名（形参表）  
{  
函数体；  
}  
被virtual说明的函数为虚函数  
**虚函数的声明只能出现在类声明中的函数原型声明中，而不能出现在成员的函数体实现的时候**  
eg6-27 以平面点为基类，派生出圆类，并继承其虚函数  
![image](https://user-images.githubusercontent.com/77609544/113731831-aacece80-972b-11eb-985e-7b1186708dc3.png)
虚函数的声明与重定义的一般规则如下：  
1. 在基类中，用virtual关键字可以将其public或protected的部分成员函数声明为虚函数
2. 要求派生类中的虚函数与基类中的虚函数有相同的函数名、参数个数、返回值以及对应的参数类型。若不相同，虚函数的机制将不起作用
3. 基类中声明的虚函数具有自动向下传递给它的派生类的性质，因此派生类中的虚函数可以省略关键字virtual。一旦有个函数被声明为虚函数，不管经历了多少次派生仍保持其虚函数特性，形成“一个接口，多种形态”
4. 如果派生类中没有对基类说明的虚函数进行重定义，则它继承基类中的虚函数
5. 构造函数不能声明为虚函数
6. 虚函数只能是类的成员函数，不能将虚函数声明为静态的或全局的，也不能把友元函数声明为虚函数
# 6.9.2 虚函数的访问
**一个虚函数被声明后，对它的访问有两种方式：用基类指针访问虚函数或用对象名访问虚函数**  
eg6-28 通过指针和通过对象访问虚函数  
![image](https://user-images.githubusercontent.com/77609544/113863538-5f282d80-97dc-11eb-894d-e8cb140ff5c5.png)
# 6.9.3 虚函数与重载的关系及虚函数的限制
## 1.虚函数与重载的关系
重载虚函数时，要求函数名、返回类型、参数个数、参数类型以及参数的顺序都与基类中原型完全相同，不能有任何不同  
若一个派生类的多个基类中有公共的基类，在公共基类中定义一个虚函数，则多重派生以后仍可以重新定义虚函数，**即虚特性是可以传递的**  
## 2.虚函数的限制
设置虚函数需注意以下几点：  
1. 只有成员函数才能声明为虚函数
2. 虚函数必须是非静态成员函数，因为静态成员函数不受限于某个对象
3. 内联函数不能声明为虚函数，因为内联函数不能在运行中动态确定其位置
4. 构造函数不能声明为虚函数
5. 析构函数可以声明为虚函数  
虚析构函数的声明格式：  
virtual ~类名；
# 6.9.4 纯虚函数与抽象类
## 1.纯虚函数
某些情况下，在基类中不能对虚函数给出有意义的定义而把它说明为纯虚函数，它的定义留给派生类来完成。纯虚函数是一种特殊的虚函数  
声明纯虚函数的格式：  
virtual 类型 函数名（参数表） = 0；  
**纯虚函数不能直接被调用，它仅提供一个与派生类相一致的接口，是派生类中具有相同名字的函数的存放处**  
## 2.抽象类
在面向对象程序设计中，要把一些性质相似的对象类中的共同成员抽取出来，作为一个它们共同的新基类  
由于新基类是一些对象类的共同成员，没有具体对象，所以其成员函数为纯虚函数  
没有具体对象存在的奖称为抽象类，即把包含纯虚函数的类称为抽象类  
一个抽象类只能作为基类来派生新类，不能生成抽象类的对象  
**纯虚函数不可以被继承**  
当基类是抽象类时，在派生类中必须给出基类中纯虚函数的定义或在该派生类中再定义为纯虚函数  
只有在派生类中给出了基类中所有纯虚函数的实现时，该派生类才不再是抽象类  
抽象类仅充当一个统一接口  
eg6-29 计算由多个不同形状的几何图形组成的总面积  
![image](https://user-images.githubusercontent.com/77609544/113865879-36556780-97df-11eb-8316-55fe69ce7055.png)
